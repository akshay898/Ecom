{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\project_e_commerce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\project_e_commerce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\project_e_commerce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{CssBaseline}from'@material-ui/core';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import{Navbar,Products,Cart,Checkout}from'./components';import{commerce}from'./lib/commerce';var App=function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),mobileOpen=_React$useState2[0],setMobileOpen=_React$useState2[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),order=_useState6[0],setOrder=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var fetchProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$commerce$produ,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return commerce.products.list();case 2:_yield$commerce$produ=_context.sent;data=_yield$commerce$produ.data;setProducts(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchProducts(){return _ref.apply(this,arguments);};}();var fetchCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=setCart;_context2.next=3;return commerce.cart.retrieve();case 3:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchCart(){return _ref2.apply(this,arguments);};}();var handleAddToCart=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(productId,quantity){var item;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return commerce.cart.add(productId,quantity);case 2:item=_context3.sent;setCart(item.cart);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function handleAddToCart(_x,_x2){return _ref3.apply(this,arguments);};}();var handleUpdateCartQty=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(lineItemId,quantity){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return commerce.cart.update(lineItemId,{quantity:quantity});case 2:response=_context4.sent;setCart(response.cart);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function handleUpdateCartQty(_x3,_x4){return _ref4.apply(this,arguments);};}();var handleRemoveFromCart=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(lineItemId){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return commerce.cart.remove(lineItemId);case 2:response=_context5.sent;setCart(response.cart);case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function handleRemoveFromCart(_x5){return _ref5.apply(this,arguments);};}();var handleEmptyCart=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var response;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return commerce.cart.empty();case 2:response=_context6.sent;setCart(response.cart);case 4:case\"end\":return _context6.stop();}}},_callee6);}));return function handleEmptyCart(){return _ref6.apply(this,arguments);};}();var refreshCart=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var newCart;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return commerce.cart.refresh();case 2:newCart=_context7.sent;setCart(newCart);case 4:case\"end\":return _context7.stop();}}},_callee7);}));return function refreshCart(){return _ref7.apply(this,arguments);};}();var handleCaptureCheckout=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(checkoutTokenId,newOrder){var incomingOrder;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return commerce.checkout.capture(checkoutTokenId,newOrder);case 3:incomingOrder=_context8.sent;setOrder(incomingOrder);refreshCart();_context8.next=11;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](0);setErrorMessage(_context8.t0.data.error.message);case 11:case\"end\":return _context8.stop();}}},_callee8,null,[[0,8]]);}));return function handleCaptureCheckout(_x6,_x7){return _ref8.apply(this,arguments);};}();useEffect(function(){fetchProducts();fetchCart();},[]);var handleDrawerToggle=function handleDrawerToggle(){return setMobileOpen(!mobileOpen);};return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(Navbar,{totalItems:cart.total_items,handleDrawerToggle:handleDrawerToggle}),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},/*#__PURE__*/React.createElement(Products,{products:products,onAddToCart:handleAddToCart,handleUpdateCartQty:true})),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/cart\"},/*#__PURE__*/React.createElement(Cart,{cart:cart,onUpdateCartQty:handleUpdateCartQty,onRemoveFromCart:handleRemoveFromCart,onEmptyCart:handleEmptyCart})),/*#__PURE__*/React.createElement(Route,{path:\"/checkout\",exact:true},/*#__PURE__*/React.createElement(Checkout,{cart:cart,order:order,onCaptureCheckout:handleCaptureCheckout,error:errorMessage})))));};export default App;","map":{"version":3,"sources":["C:/project_e_commerce/src/App.js"],"names":["React","useState","useEffect","CssBaseline","BrowserRouter","Router","Switch","Route","Navbar","Products","Cart","Checkout","commerce","App","mobileOpen","setMobileOpen","products","setProducts","cart","setCart","order","setOrder","errorMessage","setErrorMessage","fetchProducts","list","data","fetchCart","retrieve","handleAddToCart","productId","quantity","add","item","handleUpdateCartQty","lineItemId","update","response","handleRemoveFromCart","remove","handleEmptyCart","empty","refreshCart","refresh","newCart","handleCaptureCheckout","checkoutTokenId","newOrder","checkout","capture","incomingOrder","error","message","handleDrawerToggle","display","total_items"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { CssBaseline } from '@material-ui/core';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\n\r\nimport { Navbar, Products, Cart, Checkout } from './components';\r\nimport { commerce } from './lib/commerce';\r\n\r\nconst App = () => {\r\n  const [mobileOpen, setMobileOpen] = React.useState(false);\r\n  const [products, setProducts] = useState([]);\r\n  const [cart, setCart] = useState({});\r\n  const [order, setOrder] = useState({});\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const fetchProducts = async () => {\r\n    const { data } = await commerce.products.list();\r\n\r\n    setProducts(data);\r\n  };\r\n\r\n  const fetchCart = async () => {\r\n    setCart(await commerce.cart.retrieve());\r\n  };\r\n\r\n  const handleAddToCart = async (productId, quantity) => {\r\n    const item = await commerce.cart.add(productId, quantity);\r\n\r\n    setCart(item.cart);\r\n  };\r\n\r\n  const handleUpdateCartQty = async (lineItemId, quantity) => {\r\n    const response = await commerce.cart.update(lineItemId, { quantity });\r\n\r\n    setCart(response.cart);\r\n  };\r\n\r\n  const handleRemoveFromCart = async (lineItemId) => {\r\n    const response = await commerce.cart.remove(lineItemId);\r\n\r\n    setCart(response.cart);\r\n  };\r\n\r\n  const handleEmptyCart = async () => {\r\n    const response = await commerce.cart.empty();\r\n\r\n    setCart(response.cart);\r\n  };\r\n\r\n  const refreshCart = async () => {\r\n    const newCart = await commerce.cart.refresh();\r\n\r\n    setCart(newCart);\r\n  };\r\n\r\n  const handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\r\n    try {\r\n      const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\r\n\r\n      setOrder(incomingOrder);\r\n\r\n      refreshCart();\r\n    } catch (error) {\r\n      setErrorMessage(error.data.error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n    fetchCart();\r\n  }, []);\r\n\r\n  const handleDrawerToggle = () => setMobileOpen(!mobileOpen);\r\n\r\n  return (\r\n    <Router>\r\n      <div style={{ display: 'flex' }}>\r\n        <CssBaseline />\r\n        <Navbar totalItems={cart.total_items} handleDrawerToggle={handleDrawerToggle} />\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <Products products={products} onAddToCart={handleAddToCart} handleUpdateCartQty />\r\n          </Route>\r\n          <Route exact path=\"/cart\">\r\n            <Cart cart={cart} onUpdateCartQty={handleUpdateCartQty} onRemoveFromCart={handleRemoveFromCart} onEmptyCart={handleEmptyCart} />\r\n          </Route>\r\n          <Route path=\"/checkout\" exact>\r\n            <Checkout cart={cart} order={order} onCaptureCheckout={handleCaptureCheckout} error={errorMessage} />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}